<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
<div class="main-checkout-container">

    <div class="my-cart-container">
        <h5>My Cart</h5>
        <hr />
        <div class="main-card">
            <div class="checkout-card-container">

                <div class="checkout-card-details">
                    <div class="checkout-content">
                        <div class="checkout-imagecontainer">
                            <img width="100" height="160" src="~/images/Boneless_Chicken_Breasts.png" />
                        </div>
                       
                        <div>
                            <p class="card-product-name"> Whole Milk Gallon, 64 oz.</p>
                            <p class="card-product-price">$2.69</p>
                            <div class="count-container">
                                <span>-</span>
                                <span>2</span>
                                <span>+</span>
                            </div>
                        </div>
                    </div>

                    
                </div>
                <div class="card-total-price">
                    <p class="total-price">$2.69</p>
                    <a class="remove-card"> X</a>
                </div>
               
            </div>
            <hr />
            <div>
                <p>Enter a promo code</p>
                <p>Add a note</p>
            </div>
        </div>
    </div>
    <div class="order-summary">
        <h5>Order Summary</h5>
        <hr />
        <div>
            <div class="order-summary-total">
                <p>Subtotal</p>
                <p>$9.62</p>

            </div>
            <div class="order-summary-total">
                <p>Delivery </p>
                <p>FREE</p>

            </div>
            <div class="order-summary-total">
                <p>Location </p>
                <u> <a >Lagos, Nigeria</a> </u>

            </div>

        </div>
        <hr />
        <div class="order-summary-footer">
            <div class="order-summary-total">
                <p>Total</p>
                <p>$9.62</p>

            </div>
            <div>
                <a data-bs-toggle="modal" data-bs-target="#exampleModal" class="check-out-btn">Checkout</a>
            </div>
        </div>
    </div>

</div>




<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Mode Of Payment</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1">
                        <label class="form-check-label" for="flexRadioDefault1">
                            Pay on delivery
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2" checked>
                        <label class="form-check-label" for="flexRadioDefault2">
                            Pay by card or transfer
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary send-payment-request">Save</button>
            </div>
        </div>
    </div>
</div>

<script>
    const exampleModal = document.getElementById('exampleModal');
    if (exampleModal) {
        exampleModal.addEventListener('show.bs.modal', event => {
            // ... your existing code

            // Additional code to handle the "Save" button click
            const saveButton = exampleModal.querySelector('.send-payment-request');
            saveButton.addEventListener('click', () => {
                const paymentMethodRadios = exampleModal.querySelectorAll('input[name="flexRadioDefault"]');
                let selectedMethod = null;

                paymentMethodRadios.forEach(radio => {
                    if (radio.checked) {
                        selectedMethod = radio.id;
                    }
                });

                if (selectedMethod === 'flexRadioDefault1') {
                    // Make AJAX call for "Pay on delivery"
                    const payOnDeliveryData = {
                        // Prepare your data for Pay on delivery
                    };

                    // Making the AJAX call
                    fetch('/Order', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(payOnDeliveryData),
                    })
                        .then(response => {
                            if (response.ok) {
                                // Handle success response and redirection
                                window.location.href = response.url;
                            } else {
                                // Handle failure response
                                alert('Payment on delivery failed.');
                            }
                        })
                        .catch(error => {
                            // Handle error
                            console.error('Pay on delivery AJAX error:', error);
                        });
                } else if (selectedMethod === 'flexRadioDefault2') {
                    // Make AJAX call for "Pay by card or transfer"
                    const payByCardData = {
                        // Prepare your data for Pay by card or transfer
                    };

                    // Making the AJAX call
                    fetch('/payByCardEndpoint', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(payByCardData),
                    })
                        .then(response => {
                            if (response.ok) {
                                // Handle success response and redirection
                                window.location.href = response.url;
                            } else {
                                // Handle failure response
                                alert('Payment by card or transfer failed.');
                            }
                        })
                        .catch(error => {
                            // Handle error
                            console.error('Pay by card AJAX error:', error);
                        });
                }
            });
        });
    }
</script>



<style>
    .main-checkout-container {
        display: grid;
        grid-template-columns: 3fr 1fr; 
        gap: 4rem;
        padding: 1rem 10rem;
        margin-top:3rem;
    }
    .main-checkout-container h5{
        font-weight:700;
    }

    .checkout-imagecontainer{
        border: 1px solid #3335;
        margin-right:1rem;
    }
     .main-checkout-container hr{
        border:1px solid black;
    }
     .checkout-card-container{
        display: grid;
        grid-template-columns: 4fr 1fr;
     }

    .checkout-content {
        display: flex;
    }

    .card-product-price{
        color:green;
    }

    .card-total-price, .order-summary-total {
        display: flex;
        justify-content:space-between;
    }

    .count-container{
        border: 1px solid black;
        width: fit-content;
        display: flex;
        justify-content: space-evenly;
        min-width: 4rem;
    }
    .count-container span{
        cursor:pointer;
    }

    .remove-card{
        text-decoration: none;
        color:red;
        cursor:pointer;
    }

    .check-out-btn{
        background-color: red;
        padding: 0.5rem 6.5rem;
        border-radius: 25px;
        color: white;
        text-decoration: none;
        font-weight: 600;
        cursor:pointer;
    }

</style>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>

