@model IEnumerable<RestaurantFrontend.Models.MostPopularProducts.MostPopularItem>

@{
    ViewData["Title"] = "Most Popular";
}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">


<link href="@Url.Content("~/css/MostPopular.css")" rel="stylesheet" type="text/css" />

<h1 id="popular">Most Popular</h1>


<div class="main-container">

    <div class="filters">
        <h4>Filter by</h4>
        <hr />
        <div class="filter-tab" id="toggleButton">
            <p class="category">Category</p>

            <p class="category-minus" id="signDiv">-</p>

        </div>

        <div class="filter-content" id="targetDiv">

            <a asp-controller="Popular" asp-action="Index" id="all"> All</a><br />

            <a asp-controller="Popular" asp-action="Vegetables" asp-route-category="Vegetables">Vegetables</a><br />
            <a asp-controller="Popular" asp-action="Fruits" asp-route-category="Fruits"> Fruit</a><br />
            <a asp-controller="Popular" asp-action="Meat_Poultry" asp-route-category="Meat_Poultry">Meat & Poultry</a><br />
            <a asp-controller="Popular" asp-action="Fish_Seafood" asp-route-category="Fish_Seafood"> Fish & Seafood</a><br />
            <a asp-controller="Popular" asp-action="Dairy_Eggs" asp-route-category="Dairy_Eggs"> Dairy & Eggs</a><br />
            <a asp-controller="Popular" asp-action="Bakery" asp-route-category="Bakery">Bakery</a><br />
            <a asp-controller="Popular" asp-action="Pastas_Grains" asp-route-category="Pastas_Grains">Pastas & Grains</a><br />
            <a asp-controller="Popular" asp-action="Cereals_Snacks" asp-route-category="Cereals_Snacks">Cereals & Snacks</a><br />
            <a asp-controller="Popular" asp-action="Tea" asp-route-category="Tea">Tea</a><br />
            <a asp-controller="Popular" asp-action="Coffee" asp-route-category="Coffee">Coffee</a><br />
            <a asp-controller="Popular" asp-action="Soft_Drinks" asp-route-category="Soft_Drinks">Soft Drinks</a><br />
            <a asp-controller="Popular" asp-action="Beer" asp-route-category="Beer">Beer</a><br />
            <a asp-controller="Popular" asp-action="Wine" asp-route-category="Wine">Wine</a><br />
            <a asp-controller="Popular" asp-action="Home_Kitchen" asp-route-category="Home_Kitchen">Home & Kitchen</a><br />
            <a asp-controller="Popular" asp-action="Cleaning_Supplies" asp-route-category="Cleaning_Supplies">Cleaning Supplies</a><br />
            <a asp-controller="Popular" asp-action="Personal_Hygiene" asp-route-category="Personal_Hygiene">Personal Hygiene</a><br />
            <a asp-controller="Popular" asp-action="Babies" asp-route-category="Babies">Babies</a><br />

        </div>
        <hr />

        @*<div class="price-tab">
        <p class="price">Price</p>

        <p class="price-minus">-</p>

        </div>*@



        <div class="dropdown">
            <button id="dropdownButton2" class="dropdown-btn">
                <span class="category-text">Price</span>
                <span class="text-icon" id="dropdownIcon2"><i class="bi bi-plus"></i></span>
            </button>
            <div id="dropdownMenu2" class="dropdown-menu">
                <div class="price-range-slider">

                    <p class="range-value">
                        <input type="text" id="amount" readonly>
                    </p>
                    <div id="slider-range" class="range-bar"></div>

                </div>

            </div>
        </div>


        <hr />
    </div>


    <div class="row" style="margin-right: 0; padding-right:0;">

        @foreach (var item in Model)
        {
            var testing = item.Tag;

            if (item.MostPopular)
            {

                <div id="card" class="card" style="width: 12rem; height:29rem; margin-right: 20px; margin-bottom: 20px;">

                    <span class="badge rounded-pill text-bg-danger bool-label mt-2">Most Popular</span>

                    <div class="image-display">
                        <img src="@item.Image" width="170" margin-bottom="0" alt="" />
                    </div>

                    <div class="">
                        <div class="">
                            <p class="">

                                <div class="card-body">
                                    <p class="card-text">@item.Name</p>
                                    <p class="card-text-dollar text-danger"> $@item.Price</p>
                                    <div class="counter-container">
                                        <button class="decrementBtn faded"><i class="bi bi-dash"></i></button>
                                        <p class="count">1</p>
                                        <button class="incrementBtn"><i class="bi bi-plus"></i></button>
                                    </div>

                                </div>
                                <a class="btn btn-dark text-white add-to-cart-btn m-3"> Add to Cart</a>
                            </p>
                        </div>
                    </div>
                </div>
            }
        }
    </div>
</div>




<script>
    function toggleDiv() {
        const targetDiv = document.getElementById("targetDiv");
        const signDiv = document.getElementById("signDiv");
        product = "rice";

        if (targetDiv.classList.contains("hidden")) {
            targetDiv.classList.remove("hidden");
            signDiv.innerHTML = "-";
        } else {
            targetDiv.classList.add("hidden");
            signDiv.innerHTML = "+";
        }
    }

    const toggleButton = document.getElementById("toggleButton");
    toggleButton.addEventListener("click", toggleDiv);



    function handleDecrementClick(countElement) {
        const currentCount = parseInt(countElement.textContent);
        if (currentCount > 1) {
            countElement.textContent = currentCount - 1;
        }
        if (currentCount === 2) {
            countElement.previousElementSibling.classList.add('faded');
        }
    }

    function handleIncrementClick(countElement) {
        const currentCount = parseInt(countElement.textContent);
        countElement.textContent = currentCount + 1;
        if (currentCount === 1) {
            countElement.previousElementSibling.classList.remove('faded');
        }
    }


    const counterContainers = document.querySelectorAll('.counter-container');
    counterContainers.forEach(container => {
        const countElement = container.querySelector('.count');
        const decrementBtn = container.querySelector('.decrementBtn');
        const incrementBtn = container.querySelector('.incrementBtn');

        decrementBtn.addEventListener('click', function () {
            handleDecrementClick(countElement);
        });

        incrementBtn.addEventListener('click', function () {
            handleIncrementClick(countElement);
        });
    });


    function toggleDropdown(buttonId, menuId, iconId) {
    const button = document.getElementById(buttonId);
    const menu = document.getElementById(menuId);
    const icon = document.getElementById(iconId);

    button.addEventListener('click', () => {
        if (menu.style.display === 'none') {
            menu.style.display = 'block';
            icon.textContent = '-';
        } else {
            menu.style.display = 'none';
            icon.textContent = '+';
        }
    });
}

toggleDropdown('dropdownButton1', 'dropdownMenu1', 'dropdownIcon1');
toggleDropdown('dropdownButton2', 'dropdownMenu2', 'dropdownIcon2');

</script>




